<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Kindle Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Bookerly', monospace;
            background: #fff;
            color: #000;
            width: 100vw;
            max-width: 100%;
            margin: 0 auto;
            overflow-x: hidden;
        }

        /* â”€â”€ Tabs â”€â”€ */
        .tabs {
            display: flex;
            border-bottom: 3px solid #000;
            background: #f0f0f0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .tab-btn {
            flex: 1;
            padding: clamp(8px,2vw,12px);
            background: #e0e0e0;
            border: none;
            border-right: 2px solid #000;
            font-family: 'Courier New', monospace;
            font-size: clamp(11px,2.2vw,15px);
            font-weight: bold;
            cursor: pointer;
            white-space: nowrap;
        }
        .tab-btn:last-child { border-right: none; }
        .tab-btn.active { background: #fff; }

        .tab-content { display: none; padding: clamp(10px,2vw,15px); font-size: clamp(14px,2.5vw,16px); line-height: 1.3; }
        .tab-content.active { display: block; }

        /* â”€â”€ Clock (Tab 1) â”€â”€ */
        .clock { text-align: center; margin-bottom: clamp(10px,3vw,20px); }
        #time { font-size: clamp(36px,10vw,72px); font-weight: bold; letter-spacing: clamp(2px,1vw,8px); }
        #date { font-size: clamp(14px,3vw,22px); margin-top: clamp(4px,1vw,10px); }

        /* â”€â”€ FX Rate â”€â”€ */
        .fx-rate {
            background: #f8f8f8;
            border: 2px solid #000;
            padding: clamp(8px,2vw,12px);
            margin-bottom: clamp(10px,2vw,15px);
            text-align: center;
        }
        .rate-big { font-size: clamp(20px,5vw,32px); font-weight: bold; }

        /* â”€â”€ Weather â”€â”€ */
        .weather {
            border: 2px solid #000;
            padding: clamp(8px,2vw,12px);
            margin-bottom: clamp(10px,2vw,15px);
            background: #f8f8f8;
        }
        .weather-header { font-size: clamp(12px,2.5vw,14px); margin-bottom: 6px; }
        .weather-main { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
        .weather-temp { font-size: clamp(28px,6vw,40px); font-weight: bold; }
        .weather-icon { font-size: clamp(28px,6vw,40px); }
        .weather-info { font-size: clamp(12px,2.5vw,15px); line-height: 1.6; }

        /* â”€â”€ Calendar (Tab 1) â”€â”€ */
        .calendar { border: 2px solid #000; margin-bottom: clamp(10px,2vw,15px); padding: clamp(6px,1.5vw,10px); overflow-x: auto; }
        .calendar table { width: 100%; font-size: clamp(11px,2.5vw,16px); border-collapse: collapse; }
        .calendar th { border-bottom: 2px solid #000; padding: clamp(3px,1vw,6px); background: #f0f0f0; }
        .calendar td {
            border-right: 1px solid #ccc;
            border-bottom: 1px solid #ccc;
            width: 14.28%;
            height: clamp(24px,5vw,36px);
            padding: 2px;
            text-align: center;
            vertical-align: middle;
        }
        .calendar td.today { background: #ddd; font-weight: bold; border: 2px solid #000; }
        .calendar td.holiday { color: #c00; font-weight: bold; }

        /* â”€â”€ Holidays â”€â”€ */
        .holidays {
            border: 2px solid #000;
            padding: clamp(6px,1.5vw,10px);
            font-size: clamp(11px,2.3vw,14px);
            margin-bottom: clamp(8px,2vw,12px);
            max-height: clamp(80px,15vh,120px);
            overflow-y: auto;
        }
        .holidays h3 { font-size: clamp(13px,2.8vw,17px); margin-bottom: clamp(4px,1vw,8px); border-bottom: 1px solid #000; padding-bottom: 3px; }
        .holiday-item { padding: clamp(2px,0.8vw,4px) 0; border-bottom: 1px dotted #ccc; }

        /* â”€â”€ Quote (Tab 1) â”€â”€ */
        .quote {
            border: 2px solid #000;
            padding: clamp(8px,2vw,12px);
            margin-bottom: clamp(8px,2vw,12px);
            background: #f9f9f9;
            font-size: clamp(11px,2.3vw,14px);
            font-style: italic;
            line-height: 1.5;
            min-height: clamp(60px,12vh,90px);
        }
        .quote-text { margin-bottom: clamp(4px,1vw,8px); }
        .quote-author { text-align: right; font-weight: bold; font-style: normal; }

        /* â”€â”€ Lock Screen (Tab 2) â”€â”€ */
        .lockscreen {
            position: relative;
            width: 100%;
            height: calc(100vh - 45px);
            min-height: 500px;
            background: #222;
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: clamp(20px,5vw,50px) clamp(15px,4vw,40px);
            background-size: cover;
            background-position: center;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="600" height="800"><rect fill="%23222" width="600" height="800"/><text x="300" y="400" font-size="18" fill="%23555" text-anchor="middle" font-family="monospace">Upload images/lockscreen.jpg</text></svg>');
        }
        .lock-overlay {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(180deg,rgba(0,0,0,0.6) 0%,rgba(0,0,0,0.25) 50%,rgba(0,0,0,0.7) 100%);
            z-index: 1;
        }
        .lock-content { position: relative; z-index: 2; text-align: center; }
        .lock-time {
            font-size: clamp(52px,15vw,100px);
            font-weight: bold;
            letter-spacing: clamp(2px,1vw,6px);
            text-shadow: 0 2px 8px rgba(0,0,0,0.9);
            margin-bottom: clamp(6px,2vw,15px);
        }
        .lock-date { font-size: clamp(16px,4vw,28px); text-shadow: 0 2px 4px rgba(0,0,0,0.9); }
        .lock-info { position: relative; z-index: 2; text-align: center; text-shadow: 0 2px 4px rgba(0,0,0,0.9); }
        .lock-weather { font-size: clamp(18px,4.5vw,28px); font-weight: bold; margin-bottom: clamp(10px,3vw,20px); }
        .lock-quote { font-size: clamp(13px,3vw,18px); font-style: italic; line-height: 1.5; padding: 0 clamp(10px,4vw,30px); margin-bottom: 8px; color: #eee; }
        .lock-author { font-size: clamp(11px,2.5vw,15px); opacity: 0.85; color: #ccc; }

        /* â”€â”€ News (Tab 3) â”€â”€ */
        .news-section { margin-bottom: clamp(15px,3vw,25px); }
        .news-section h2 { font-size: clamp(15px,3.5vw,20px); border-bottom: 3px solid #000; padding-bottom: clamp(4px,1vw,8px); margin-bottom: clamp(8px,2vw,12px); }
        .news-list { max-height: clamp(250px,40vh,400px); overflow-y: auto; border: 2px solid #000; padding: clamp(8px,2vw,12px); background: #fafafa; }
        .news-item { padding: clamp(6px,1.5vw,10px) 0; border-bottom: 1px solid #ccc; font-size: clamp(11px,2.3vw,14px); line-height: 1.5; }
        .news-item:last-child { border-bottom: none; }
        .news-title { font-weight: bold; margin-bottom: clamp(3px,0.8vw,5px); }
        .news-source { font-size: clamp(9px,2vw,12px); color: #666; }
        .news-loading { text-align: center; padding: 20px; font-style: italic; }

        /* â”€â”€ Big Clock (Tab 4) â”€â”€ */
        .bigclock-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - 45px);
            padding: clamp(10px,3vw,20px);
            text-align: center;
        }
        #bigTime {
            font-size: clamp(72px,22vw,180px);
            font-weight: bold;
            letter-spacing: clamp(4px,2vw,16px);
            line-height: 1;
            margin-bottom: clamp(6px,1.5vw,16px);
        }
        #bigDate {
            font-size: clamp(18px,4.5vw,36px);
            margin-bottom: clamp(10px,2vw,18px);
            letter-spacing: 2px;
        }
        .big-holidays {
            width: 100%;
            max-width: 560px;
            font-size: clamp(12px,2.8vw,18px);
            margin-bottom: clamp(10px,2vw,16px);
            line-height: 1.6;
            min-height: 10px;
            text-align: left;
        }
        .big-holidays .holiday-item { padding: clamp(2px,0.8vw,5px) 0; border-bottom: 1px dotted #ccc; }
        .bigcal { width: 100%; max-width: 560px; }
        .bigcal table { width: 100%; border-collapse: collapse; }
        .bigcal th {
            border-bottom: 2px solid #000;
            padding: clamp(4px,1.5vw,10px);
            background: #f0f0f0;
            font-size: clamp(14px,3vw,22px);
        }
        .bigcal td {
            border: 1px solid #ccc;
            width: 14.28%;
            height: clamp(32px,7vw,56px);
            text-align: center;
            vertical-align: middle;
            font-size: clamp(14px,3vw,20px);
        }
        .bigcal td.today { background: #000; color: #fff; font-weight: bold; border: 2px solid #000; }
        .bigcal td.holiday { color: #c00; font-weight: bold; }

        /* â”€â”€ Quote (Tab 4) â”€â”€ */
        .big-quote {
            width: 100%;
            max-width: 560px;
            margin-top: clamp(14px,3vw,24px);
            padding: clamp(10px,2vw,16px);
            border-top: 2px solid #000;
            font-style: italic;
            line-height: 1.6;
        }
        .big-quote-text {
            font-size: clamp(13px,2.8vw,18px);
            margin-bottom: clamp(6px,1.5vw,10px);
        }
        .big-quote-author {
            font-size: clamp(12px,2.5vw,15px);
            text-align: right;
            font-style: normal;
            font-weight: bold;
            opacity: 0.7;
        }

        /* â”€â”€ Footer â”€â”€ */
        .footer { text-align: center; font-size: clamp(9px,2vw,12px); opacity: 0.6; margin-top: 10px; padding-bottom: 8px; }

        /* â”€â”€ Media Queries â”€â”€ */
        @media (max-width: 480px) {
            .tab-btn { padding: 8px 3px; font-size: 10px; }
            #time { font-size: 36px; }
            #bigTime { font-size: 60px; }
        }
        @media (min-width: 481px) and (max-width: 768px) {
            #time { font-size: 56px; }
            #bigTime { font-size: 100px; }
        }
        @media (min-width: 769px) and (max-width: 1024px) {
            body { max-width: 800px; margin: 0 auto; }
            #time { font-size: 64px; }
            #bigTime { font-size: 140px; }
        }
        @media (min-width: 1025px) {
            body { max-width: 900px; margin: 0 auto; }
            .tab-content { padding: 20px 30px; }
            #time { font-size: 72px; }
            #bigTime { font-size: 180px; }
            .calendar td { height: 40px; font-size: 16px; }
            .news-list { max-height: 450px; }
        }
        @media (orientation: landscape) and (max-height: 600px) {
            .lockscreen { height: 100vh; }
            .lock-time { font-size: clamp(36px,12vw,72px); }
            #bigTime { font-size: clamp(48px,14vw,100px); }
        }
    </style>
</head>
<body>

<!-- â”€â”€ Tabs â”€â”€ -->
<div class="tabs">
    <button class="tab-btn" onclick="switchTab(0)">ğŸ“Š Info</button>
    <button class="tab-btn" onclick="switchTab(1)">ğŸ”’ Lock</button>
    <button class="tab-btn" onclick="switchTab(2)">ğŸ“° News</button>
    <button class="tab-btn active" onclick="switchTab(3)">ğŸ• Clock</button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 1: Dashboard â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab1" class="tab-content">
    <div class="clock">
        <div id="time">20:43:00</div>
        <div id="date">2026å¹´02æœˆ21æ—¥ï¼ˆåœŸï¼‰</div>
    </div>
    <div class="fx-rate">
        <div>ğŸ’± JPY / VND</div>
        <div id="fxrate" class="rate-big">1 JPY = --- VND</div>
        <div id="fxtime" style="font-size:11px;opacity:0.6;"></div>
    </div>
    <div class="weather">
        <div class="weather-header">â›… Tokyo â€“ Thá»i tiáº¿t hiá»‡n táº¡i</div>
        <div class="weather-main">
            <div class="weather-temp" id="wTemp">--Â°C</div>
            <div class="weather-icon" id="wIcon">â›…</div>
        </div>
        <div class="weather-info">
            <span id="wDesc">Äang táº£i...</span><br>
            ğŸ’§ Äá»™ áº©m: <b id="wHumidity">--%</b> &nbsp; ğŸ’¨ GiÃ³: <b id="wWind">-- km/h</b>
        </div>
    </div>
    <div class="calendar">
        <table id="calendar"></table>
    </div>
    <div class="holidays">
        <h3>ğŸŒ Lá»… thÃ¡ng nÃ y</h3>
        <div id="holidayList">Äang táº£i...</div>
    </div>
    <div class="quote">
        <div class="quote-text" id="quoteText">Äang táº£i...</div>
        <div class="quote-author" id="quoteAuthor"></div>
    </div>
    <div class="footer">Kindle Dashboard Â· Saitama Homelab</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 2: Lock Screen â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab2" class="tab-content">
    <div class="lockscreen">
        <div class="lock-overlay"></div>
        <div class="lock-content">
            <div class="lock-time" id="lockTime">20:43</div>
            <div class="lock-date" id="lockDate">åœŸæ›œæ—¥, 2æœˆ21æ—¥</div>
        </div>
        <div class="lock-info">
            <div class="lock-weather" id="lockWeather">â›… --Â°C Â· Tokyo</div>
            <div class="lock-quote" id="lockQuote">"..."</div>
            <div class="lock-author" id="lockAuthor"></div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 3: RSS News â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab3" class="tab-content">
    <div class="news-section">
        <h2>ğŸ‡¯ğŸ‡µ Nháº­t Báº£n â€“ Top Stories</h2>
        <div id="newsJP" class="news-list">
            <div class="news-loading">Äang táº£i...</div>
        </div>
    </div>
    <div class="news-section">
        <h2>ğŸ‡»ğŸ‡³ Viá»‡t Nam â€“ Tin ná»•i báº­t</h2>
        <div id="newsVN" class="news-list">
            <div class="news-loading">Äang táº£i...</div>
        </div>
    </div>
    <div class="footer">Google News RSS Â· rss2json API</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 4: Big Clock (DEFAULT) â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab4" class="tab-content active">
    <div class="bigclock-wrap">
        <div id="bigTime">20:43</div>
        <div id="bigDate">2026å¹´02æœˆ21æ—¥ï¼ˆåœŸï¼‰</div>
        <div class="big-holidays" id="bigHolidayList"></div>
        <div class="bigcal">
            <table id="bigCalendar"></table>
        </div>
        <div class="big-quote">
            <div class="big-quote-text" id="bigQuoteText"></div>
            <div class="big-quote-author" id="bigQuoteAuthor"></div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• JavaScript â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script type="text/javascript">

    /* â”€â”€ Constants â”€â”€ */
    var WEEKDAYS      = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'];
    var WEEKDAYS_FULL = ['æ—¥æ›œæ—¥','æœˆæ›œæ—¥','ç«æ›œæ—¥','æ°´æ›œæ—¥','æœ¨æ›œæ—¥','é‡‘æ›œæ—¥','åœŸæ›œæ—¥'];
    var JST_OFFSET    = 9 * 60;
    var holidayDates  = {};

    var WMO = {
        0:['â˜€ï¸','Trá»i quang'],    1:['ğŸŒ¤ï¸','Ãt mÃ¢y'],       2:['â›…','CÃ³ mÃ¢y'],
        3:['â˜ï¸','Nhiá»u mÃ¢y'],     45:['ğŸŒ«ï¸','SÆ°Æ¡ng mÃ¹'],    48:['ğŸŒ«ï¸','SÆ°Æ¡ng Ä‘Ã¡'],
        51:['ğŸŒ¦ï¸','MÆ°a phÃ¹n nháº¹'], 53:['ğŸŒ¦ï¸','MÆ°a phÃ¹n'],   55:['ğŸŒ§ï¸','MÆ°a phÃ¹n dÃ y'],
        61:['ğŸŒ§ï¸','MÆ°a nháº¹'],     63:['ğŸŒ§ï¸','MÆ°a vá»«a'],     65:['ğŸŒ§ï¸','MÆ°a to'],
        71:['ğŸŒ¨ï¸','Tuyáº¿t nháº¹'],   73:['ğŸŒ¨ï¸','Tuyáº¿t vá»«a'],   75:['â„ï¸','Tuyáº¿t dÃ y'],
        80:['ğŸŒ¦ï¸','MÆ°a rÃ o nháº¹'],  81:['ğŸŒ§ï¸','MÆ°a rÃ o'],    82:['â›ˆï¸','MÆ°a rÃ o to'],
        95:['â›ˆï¸','DÃ´ng bÃ£o'],     96:['â›ˆï¸','DÃ´ng+mÆ°a Ä‘Ã¡'], 99:['â›ˆï¸','DÃ´ng lá»›n']
    };

    var QUOTES = [
        ["Náº¿u báº¡n thá»±c sá»± muá»‘n lÃ m Ä‘iá»u gÃ¬ Ä‘Ã³, báº¡n sáº½ tÃ¬m ra cÃ¡ch. Náº¿u khÃ´ng, báº¡n sáº½ tÃ¬m tháº¥y má»™t cÃ¡i cá»›.", "Jim Rohn"],
        ["Äá»«ng ngáº¡i tá»« bá» Ä‘iá»u tá»‘t Ä‘áº¹p Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c Ä‘iá»u vÄ© Ä‘áº¡i.", "John D. Rockefeller"],
        ["ThÃ nh cÃ´ng thÆ°á»ng Ä‘áº¡t Ä‘Æ°á»£c bá»Ÿi nhá»¯ng ngÆ°á»i khÃ´ng biáº¿t ráº±ng tháº¥t báº¡i lÃ  khÃ´ng thá»ƒ trÃ¡nh khá»i.", "Coco Chanel"],
        ["Náº¿u báº¡n mÆ¡ Æ°á»›c Ä‘Æ°á»£c, báº¡n sáº½ lÃ m Ä‘Æ°á»£c.", "Walt Disney"],
        ["CÃ¡ch duy nháº¥t Ä‘á»ƒ lÃ m cÃ´ng viá»‡c tuyá»‡t vá»i lÃ  yÃªu nhá»¯ng gÃ¬ báº¡n lÃ m.", "Steve Jobs"],
        ["ThÃ nh cÃ´ng lÃ  Ä‘i tá»« tháº¥t báº¡i nÃ y sang tháº¥t báº¡i khÃ¡c mÃ  khÃ´ng máº¥t Ä‘i sá»± nhiá»‡t tÃ¬nh.", "Winston Churchill"],
        ["HÃ nh Ä‘á»™ng lÃ  chÃ¬a khÃ³a ná»n táº£ng cho má»i thÃ nh cÃ´ng.", "Pablo Picasso"],
        ["TÃ´i khÃ´ng tháº¥t báº¡i. TÃ´i chá»‰ tÃ¬m tháº¥y 10,000 cÃ¡ch khÃ´ng hiá»‡u quáº£.", "Thomas Edison"],
        ["TÆ°Æ¡ng lai thuá»™c vá» nhá»¯ng ngÆ°á»i tin vÃ o váº» Ä‘áº¹p cá»§a giáº¥c mÆ¡ mÃ¬nh.", "Eleanor Roosevelt"],
        ["Báº¡n khÃ´ng cáº§n pháº£i tuyá»‡t vá»i Ä‘á»ƒ báº¯t Ä‘áº§u, nhÆ°ng báº¡n pháº£i báº¯t Ä‘áº§u Ä‘á»ƒ trá»Ÿ nÃªn tuyá»‡t vá»i.", "Zig Ziglar"],
        ["Äá»«ng chá» Ä‘á»£i. Thá»i Ä‘iá»ƒm sáº½ khÃ´ng bao giá» hoÃ n háº£o.", "Napoleon Hill"],
        ["NgÆ°á»i chiáº¿n tháº¯ng khÃ´ng bao giá» bá» cuá»™c. NgÆ°á»i bá» cuá»™c khÃ´ng bao giá» chiáº¿n tháº¯ng.", "Vince Lombardi"],
        ["MÆ¡ Æ°á»›c lá»›n. Báº¯t Ä‘áº§u nhá». NhÆ°ng trÃªn háº¿t, hÃ£y báº¯t Ä‘áº§u.", "Simon Sinek"],
        ["ThÃ nh cÃ´ng khÃ´ng pháº£i lÃ  chÃ¬a khÃ³a cá»§a háº¡nh phÃºc. Háº¡nh phÃºc lÃ  chÃ¬a khÃ³a cá»§a thÃ nh cÃ´ng.", "Albert Schweitzer"],
        ["TÃ´i tháº¥t báº¡i nhiá»u láº§n. VÃ  Ä‘Ã³ lÃ  lÃ½ do tÃ´i thÃ nh cÃ´ng.", "Michael Jordan"],
        ["HÃ£y Ä‘áº§u tÆ° vÃ o báº£n thÃ¢n mÃ¬nh. ÄÃ³ lÃ  khoáº£n Ä‘áº§u tÆ° tá»‘t nháº¥t báº¡n tá»«ng thá»±c hiá»‡n.", "Robin Sharma"],
        ["Náº¿u báº¡n khÃ´ng xÃ¢y dá»±ng giáº¥c mÆ¡ cá»§a mÃ¬nh, ai Ä‘Ã³ sáº½ thuÃª báº¡n Ä‘á»ƒ xÃ¢y dá»±ng giáº¥c mÆ¡ cá»§a há».", "Tony Gaskins"],
        ["ThÃ¡i Ä‘á»™ cá»§a báº¡n, chá»© khÃ´ng pháº£i nÄƒng lá»±c cá»§a báº¡n, sáº½ quyáº¿t Ä‘á»‹nh Ä‘á»™ cao cá»§a báº¡n.", "Zig Ziglar"],
        ["CÆ¡ há»™i khÃ´ng tá»± nhiÃªn Ä‘áº¿n. Báº¡n tá»± táº¡o ra nÃ³.", "Chris Grosser"],
        ["Sá»± kiÃªn trÃ¬ chiáº¿n tháº¯ng tÃ i nÄƒng khi tÃ i nÄƒng khÃ´ng kiÃªn trÃ¬.", "John Wooden"],
        ["HÃ£y cá»‘ gáº¯ng Ä‘á»«ng trá»Ÿ thÃ nh ngÆ°á»i thÃ nh cÃ´ng. Thay vÃ o Ä‘Ã³ hÃ£y trá»Ÿ thÃ nh ngÆ°á»i cÃ³ giÃ¡ trá»‹.", "Albert Einstein"],
        ["KhÃ´ng cÃ³ bÃ­ quyáº¿t cho thÃ nh cÃ´ng. ÄÃ³ lÃ  káº¿t quáº£ cá»§a sá»± chuáº©n bá»‹, lÃ m viá»‡c chÄƒm chá»‰ vÃ  há»c há»i tá»« tháº¥t báº¡i.", "Colin Powell"],
        ["ThÃ nh cÃ´ng lÃ  lÃ m nhá»¯ng gÃ¬ báº¡n yÃªu thÃ­ch vÃ  yÃªu thÃ­ch nhá»¯ng gÃ¬ báº¡n lÃ m.", "Wayne Dyer"],
        ["CÃ¡ch tá»‘t nháº¥t Ä‘á»ƒ dá»± Ä‘oÃ¡n tÆ°Æ¡ng lai lÃ  tá»± táº¡o ra nÃ³.", "Peter Drucker"],
        ["HÃ£y sá»‘ng nhÆ° thá»ƒ báº¡n sáº½ cháº¿t ngÃ y mai. Há»c nhÆ° thá»ƒ báº¡n sáº½ sá»‘ng mÃ£i mÃ£i.", "Mahatma Gandhi"],
        ["ChÃºng ta táº¡o ra cuá»™c sá»‘ng cá»§a mÃ¬nh vÃ  chÃºng ta táº¡o ra nÃ³ má»—i ngÃ y.", "Oprah Winfrey"],
        ["Báº¡n cÃ ng Ä‘am mÃª Ä‘iá»u gÃ¬, báº¡n cÃ ng thÃ nh cÃ´ng trong Ä‘iá»u Ä‘Ã³.", "Oprah Winfrey"],
        ["Äá»«ng Ä‘áº¿m ngÃ y. HÃ£y lÃ m cho má»—i ngÃ y cÃ³ Ã½ nghÄ©a.", "Muhammad Ali"],
        ["Báº¡n lÃ  kiáº¿n trÃºc sÆ° cá»§a sá»‘ pháº­n cá»§a chÃ­nh mÃ¬nh.", "Khuyáº¿t danh"],
        ["Äá»«ng sá»£ tháº¥t báº¡i. Sá»£ khÃ´ng cá»‘ gáº¯ng.", "Khuyáº¿t danh"]
    ];

    var selectedQuote = QUOTES[Math.floor(Math.random() * QUOTES.length)];

    /* â”€â”€ Helpers â”€â”€ */
    function pad(n) { return (n < 10) ? '0' + n : '' + n; }

    function getJST() {
        var now = new Date();
        var utc = now.getTime() + (now.getTimezoneOffset() * 60000);
        return new Date(utc + (JST_OFFSET * 60000));
    }

    function getWMO(code) {
        if (WMO[code]) return WMO[code];
        if (code <= 3)  return ['â›…','CÃ³ mÃ¢y'];
        if (code <= 55) return ['ğŸŒ¦ï¸','MÆ°a phÃ¹n'];
        if (code <= 65) return ['ğŸŒ§ï¸','MÆ°a'];
        if (code <= 77) return ['ğŸŒ¨ï¸','Tuyáº¿t'];
        if (code <= 82) return ['ğŸŒ¦ï¸','MÆ°a rÃ o'];
        return ['â›ˆï¸','DÃ´ng bÃ£o'];
    }

    /* â”€â”€ Tab Switch â”€â”€ */
    function switchTab(idx) {
        var tabs = document.querySelectorAll('.tab-content');
        var btns = document.querySelectorAll('.tab-btn');
        for (var i = 0; i < tabs.length; i++) {
            if (i === idx) {
                tabs[i].className = 'tab-content active';
                btns[i].className = 'tab-btn active';
            } else {
                tabs[i].className = 'tab-content';
                btns[i].className = 'tab-btn';
            }
        }
        if (idx === 2 && !window.rssLoaded) {
            loadRSSFeeds();
            window.rssLoaded = true;
        }
    }

    /* â”€â”€ Clock â”€â”€ */
    function updateClock() {
        var jst = getJST();
        var h   = pad(jst.getHours());
        var m   = pad(jst.getMinutes());
        var s   = pad(jst.getSeconds());
        var yr  = jst.getFullYear();
        var mo  = pad(jst.getMonth() + 1);
        var dy  = pad(jst.getDate());
        var wd  = WEEKDAYS[jst.getDay()];
        var wdf = WEEKDAYS_FULL[jst.getDay()];

        document.getElementById('time').innerHTML     = h + ':' + m + ':' + s;
        document.getElementById('date').innerHTML     = yr + 'å¹´' + mo + 'æœˆ' + dy + 'æ—¥ï¼ˆ' + wd + 'ï¼‰';
        document.getElementById('lockTime').innerHTML = h + ':' + m;
        document.getElementById('lockDate').innerHTML = wdf + ', ' + mo + 'æœˆ' + dy + 'æ—¥';
        document.getElementById('bigTime').innerHTML  = h + ':' + m;
        document.getElementById('bigDate').innerHTML  = yr + 'å¹´' + mo + 'æœˆ' + dy + 'æ—¥ï¼ˆ' + wd + 'ï¼‰';
    }

    /* â”€â”€ Quote â”€â”€ */
    function showQuote() {
        document.getElementById('quoteText').innerHTML      = '"' + selectedQuote[0] + '"';
        document.getElementById('quoteAuthor').innerHTML    = 'â€” ' + selectedQuote[1];
        document.getElementById('lockQuote').innerHTML      = '"' + selectedQuote[0] + '"';
        document.getElementById('lockAuthor').innerHTML     = 'â€” ' + selectedQuote[1];
        document.getElementById('bigQuoteText').innerHTML   = '"' + selectedQuote[0] + '"';
        document.getElementById('bigQuoteAuthor').innerHTML = 'â€” ' + selectedQuote[1];
    }

    /* â”€â”€ FX Rate â”€â”€ */
    function loadFX() {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'https://api.exchangerate-api.com/v4/latest/JPY', true);
        xhr.onload = function() {
            if (xhr.status === 200) {
                var d = JSON.parse(xhr.responseText);
                if (d.rates && d.rates.VND) {
                    var rate = Math.round(d.rates.VND * 100) / 100;
                    document.getElementById('fxrate').innerHTML = '1 JPY = ' + rate + ' VND';
                    var now = getJST();
                    document.getElementById('fxtime').innerHTML = 'æ›´æ–° ' + pad(now.getHours()) + ':' + pad(now.getMinutes());
                }
            }
        };
        xhr.send();
    }

    /* â”€â”€ Weather (Open-Meteo, no key) â”€â”€ */
    function loadWeather() {
        var url = 'https://api.open-meteo.com/v1/forecast' +
                  '?latitude=35.6762&longitude=139.6503' +
                  '&current_weather=true' +
                  '&hourly=relativehumidity_2m' +
                  '&timezone=Asia%2FTokyo';
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        xhr.onload = function() {
            if (xhr.status === 200) renderWeather(JSON.parse(xhr.responseText));
            else document.getElementById('wDesc').innerHTML = 'Lá»—i API';
        };
        xhr.onerror = function() {
            document.getElementById('wDesc').innerHTML = 'Lá»—i káº¿t ná»‘i';
        };
        xhr.send();
    }

    function renderWeather(data) {
        var cw  = data.current_weather;
        var wmo = getWMO(cw.weathercode);
        var t   = Math.round(cw.temperature);

        document.getElementById('wTemp').innerHTML       = t + 'Â°C';
        document.getElementById('wIcon').innerHTML       = wmo[0];
        document.getElementById('wDesc').innerHTML       = wmo[1];
        document.getElementById('wWind').innerHTML       = Math.round(cw.windspeed) + ' km/h';
        document.getElementById('lockWeather').innerHTML = wmo[0] + ' ' + t + 'Â°C Â· Tokyo';

        var hr  = getJST().getHours();
        var hum = (data.hourly && data.hourly.relativehumidity_2m)
                  ? (data.hourly.relativehumidity_2m[hr] || '--') : '--';
        document.getElementById('wHumidity').innerHTML = hum + '%';
    }

    /* â”€â”€ Holidays â”€â”€ */
    function loadHolidays() {
        var year = getJST().getFullYear();

        var xhrJP = new XMLHttpRequest();
        xhrJP.open('GET', 'https://holidays-jp.github.io/api/v1/' + year + '/date.json', true);
        xhrJP.onload = function() {
            if (xhrJP.status === 200) displayHolidays(JSON.parse(xhrJP.responseText), 'JP');
        };
        xhrJP.send();

        var xhrVN = new XMLHttpRequest();
        xhrVN.open('GET', 'https://date.nager.at/api/v3/PublicHolidays/' + year + '/VN', true);
        xhrVN.onload = function() {
            if (xhrVN.status === 200) displayHolidays(JSON.parse(xhrVN.responseText), 'VN');
        };
        xhrVN.send();
    }

    function displayHolidays(data, country) {
        var currentMonth = getJST().getMonth() + 1;
        var html = '';

        if (country === 'JP') {
            for (var ds in data) {
                var p  = ds.split('-');
                var mo = parseInt(p[1]);
                var dy = parseInt(p[2]);
                if (mo === currentMonth) {
                    html += '<div class="holiday-item">ğŸ‡¯ğŸ‡µ ' + mo + '/' + dy + ' ' + data[ds] + '</div>';
                    holidayDates[dy] = true;
                }
            }
        } else {
            for (var i = 0; i < data.length; i++) {
                var p  = data[i].date.split('-');
                var mo = parseInt(p[1]);
                var dy = parseInt(p[2]);
                if (mo === currentMonth) {
                    html += '<div class="holiday-item">ğŸ‡»ğŸ‡³ ' + mo + '/' + dy + ' ' + data[i].localName + '</div>';
                }
            }
        }

        var el = document.getElementById('holidayList');
        if (html) {
            el.innerHTML = (el.innerHTML === 'Äang táº£i...' ? '' : el.innerHTML) + html;
        } else if (el.innerHTML === 'Äang táº£i...') {
            el.innerHTML = 'KhÃ´ng cÃ³ lá»…';
        }

        renderCalendar();
        renderBigCalendar();
        renderBigHolidays();
    }

    /* â”€â”€ Big Holidays (Tab 4) â”€â”€ */
    function renderBigHolidays() {
        var src = document.getElementById('holidayList');
        var el  = document.getElementById('bigHolidayList');
        if (!src || !el) return;
        el.innerHTML = (src.innerHTML === 'Äang táº£i...') ? '' : src.innerHTML;
    }

    /* â”€â”€ Calendar (Tab 1) â”€â”€ */
    function renderCalendar() {
        var jst      = getJST();
        var year     = jst.getFullYear();
        var month    = jst.getMonth();
        var today    = jst.getDate();
        var table    = document.getElementById('calendar');
        table.innerHTML = '';

        var thead = document.createElement('thead');
        var hr    = document.createElement('tr');
        for (var i = 0; i < WEEKDAYS.length; i++) {
            var th = document.createElement('th');
            th.innerHTML = WEEKDAYS[i];
            hr.appendChild(th);
        }
        thead.appendChild(hr);
        table.appendChild(thead);

        var tbody    = document.createElement('tbody');
        var firstDay = new Date(year, month, 1).getDay();
        var total    = new Date(year, month + 1, 0).getDate();
        var row      = document.createElement('tr');

        for (var i = 0; i < firstDay; i++) row.appendChild(document.createElement('td'));

        for (var d = 1; d <= total; d++) {
            if ((firstDay + d - 1) % 7 === 0 && d !== 1) {
                tbody.appendChild(row);
                row = document.createElement('tr');
            }
            var td = document.createElement('td');
            td.innerHTML = d;
            if (d === today) td.className = 'today';
            if (holidayDates[d]) td.className = (td.className ? td.className + ' ' : '') + 'holiday';
            row.appendChild(td);
        }
        tbody.appendChild(row);
        table.appendChild(tbody);
    }

    /* â”€â”€ Big Calendar (Tab 4) â”€â”€ */
    function renderBigCalendar() {
        var jst      = getJST();
        var year     = jst.getFullYear();
        var month    = jst.getMonth();
        var today    = jst.getDate();
        var table    = document.getElementById('bigCalendar');
        table.innerHTML = '';

        var thead = document.createElement('thead');
        var hr    = document.createElement('tr');
        for (var i = 0; i < WEEKDAYS.length; i++) {
            var th = document.createElement('th');
            th.innerHTML = WEEKDAYS[i];
            hr.appendChild(th);
        }
        thead.appendChild(hr);
        table.appendChild(thead);

        var tbody    = document.createElement('tbody');
        var firstDay = new Date(year, month, 1).getDay();
        var total    = new Date(year, month + 1, 0).getDate();
        var row      = document.createElement('tr');

        for (var i = 0; i < firstDay; i++) row.appendChild(document.createElement('td'));

        for (var d = 1; d <= total; d++) {
            if ((firstDay + d - 1) % 7 === 0 && d !== 1) {
                tbody.appendChild(row);
                row = document.createElement('tr');
            }
            var td = document.createElement('td');
            td.innerHTML = d;
            if (d === today) td.className = 'today';
            if (holidayDates[d]) td.className = (td.className ? td.className + ' ' : '') + 'holiday';
            row.appendChild(td);
        }
        tbody.appendChild(row);
        table.appendChild(tbody);
    }

    /* â”€â”€ RSS News â”€â”€ */
    function loadRSSFeeds() {
        fetchRSS('https://news.google.com/rss?hl=ja&gl=JP&ceid=JP:ja', 'newsJP', 'ğŸ‡¯ğŸ‡µ');
        fetchRSS('https://news.google.com/rss?hl=vi&gl=VN&ceid=VN:vi', 'newsVN', 'ğŸ‡»ğŸ‡³');
    }

    function fetchRSS(feedUrl, targetId, flag) {
        var api = 'https://api.rss2json.com/v1/api.json?rss_url=' + encodeURIComponent(feedUrl) + '&count=10';
        var xhr = new XMLHttpRequest();
        xhr.open('GET', api, true);
        xhr.onload = function() {
            if (xhr.status === 200) displayRSS(JSON.parse(xhr.responseText), targetId, flag);
            else document.getElementById(targetId).innerHTML = '<div class="news-loading">Lá»—i táº£i tin</div>';
        };
        xhr.onerror = function() {
            document.getElementById(targetId).innerHTML = '<div class="news-loading">Lá»—i káº¿t ná»‘i</div>';
        };
        xhr.send();
    }

    function displayRSS(data, targetId, flag) {
        var html = '';
        if (data.items && data.items.length > 0) {
            for (var i = 0; i < Math.min(data.items.length, 8); i++) {
                var title  = data.items[i].title  || 'No title';
                var source = data.items[i].author || 'Google News';
                if (title.length > 100) title = title.substring(0, 97) + '...';
                html += '<div class="news-item">' +
                    '<div class="news-title">' + flag + ' ' + title + '</div>' +
                    '<div class="news-source">' + source + '</div>' +
                '</div>';
            }
        } else {
            html = '<div class="news-loading">KhÃ´ng cÃ³ tin</div>';
        }
        document.getElementById(targetId).innerHTML = html;
    }

    /* â”€â”€ Init â”€â”€ */
    updateClock();
    renderCalendar();
    renderBigCalendar();
    showQuote();
    loadFX();
    loadWeather();
    loadHolidays();

    setInterval(updateClock, 1000);
    setInterval(loadFX,      15 * 60 * 1000);
    setInterval(loadWeather, 30 * 60 * 1000);

    // Reload bypass cache má»—i 10 phÃºt
    setInterval(function() {
        window.location.href = window.location.href.split('?')[0] + '?t=' + new Date().getTime();
    }, 10 * 60 * 1000);

</script>
</body>
</html>
