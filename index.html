<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Kindle Dashboard</title>
    <style>
        /* â”€â”€ Reset â”€â”€ */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: Bookerly, Georgia, 'Times New Roman', serif;
            background: #fff;
            color: #000;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            overflow-x: hidden;
            /* E-ink: tÄƒng contrast */
            -webkit-font-smoothing: none;
            font-smooth: never;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TABS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .tabs {
            display: flex;
            border-bottom: 3px solid #000;
            background: #e8e8e8;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .tab-btn {
            flex: 1;
            padding: 10px 4px;
            background: #d8d8d8;
            border: none;
            border-right: 2px solid #000;
            font-family: Bookerly, Georgia, serif;
            font-size: clamp(11px, 2vw, 14px);
            font-weight: bold;
            cursor: pointer;
            white-space: nowrap;
            /* E-ink: touch target tá»‘i thiá»ƒu 44px */
            min-height: 44px;
            letter-spacing: 0.5px;
        }
        .tab-btn:last-child { border-right: none; }
        .tab-btn.active {
            background: #fff;
            border-bottom: 3px solid #fff;
            margin-bottom: -3px;
        }

        .tab-content {
            display: none;
            padding: 12px;
            font-size: clamp(13px, 2vw, 16px);
            line-height: 1.5;
        }
        .tab-content.active { display: block; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TAB 1 â€” INFO
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        /* Clock */
        .clock {
            text-align: center;
            padding: 10px 0 12px;
            border-bottom: 2px solid #000;
            margin-bottom: 12px;
        }
        #time {
            font-size: clamp(44px, 12vw, 80px);
            font-weight: bold;
            letter-spacing: 4px;
            line-height: 1;
        }
        #date {
            font-size: clamp(15px, 3vw, 22px);
            margin-top: 6px;
            letter-spacing: 1px;
        }

        /* FX */
        .fx-rate {
            border: 2px solid #000;
            padding: 10px 14px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f4f4f4;
        }
        .fx-label { font-size: clamp(12px, 2vw, 15px); }
        .fx-val   { font-size: clamp(20px, 5vw, 30px); font-weight: bold; }
        .fx-time  { font-size: clamp(10px, 1.8vw, 13px); opacity: 0.6; }

        /* Weather */
        .weather {
            border: 2px solid #000;
            padding: 10px 14px;
            margin-bottom: 10px;
            background: #f4f4f4;
        }
        .weather-header {
            font-size: clamp(12px, 2vw, 14px);
            font-weight: bold;
            border-bottom: 1px solid #ccc;
            padding-bottom: 6px;
            margin-bottom: 8px;
        }
        .weather-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .weather-left { display: flex; align-items: center; gap: 12px; }
        .weather-temp { font-size: clamp(32px, 8vw, 52px); font-weight: bold; }
        .weather-icon { font-size: clamp(30px, 7vw, 46px); }
        .weather-meta { font-size: clamp(12px, 2vw, 15px); line-height: 1.8; }

        /* Calendar */
        .cal-wrap {
            border: 2px solid #000;
            margin-bottom: 10px;
            overflow-x: auto;
        }
        .cal-title {
            background: #000;
            color: #fff;
            text-align: center;
            padding: 6px;
            font-size: clamp(13px, 2.5vw, 17px);
            font-weight: bold;
            letter-spacing: 2px;
        }
        .cal-wrap table {
            width: 100%;
            border-collapse: collapse;
            font-size: clamp(12px, 2.5vw, 16px);
        }
        .cal-wrap th {
            border-bottom: 2px solid #000;
            padding: clamp(4px, 1vw, 8px);
            background: #ececec;
            text-align: center;
        }
        .cal-wrap td {
            border: 1px solid #ccc;
            width: 14.28%;
            height: clamp(28px, 5vw, 40px);
            text-align: center;
            vertical-align: middle;
            padding: 2px;
        }
        .cal-wrap td.today {
            background: #000;
            color: #fff;
            font-weight: bold;
        }
        .cal-wrap td.holiday { color: #c00; font-weight: bold; }
        .cal-wrap td.sat { color: #00c; }

        /* Holidays */
        .holidays {
            border: 2px solid #000;
            padding: 8px 12px;
            margin-bottom: 10px;
            font-size: clamp(11px, 2vw, 14px);
            max-height: 110px;
            overflow-y: auto;
            background: #fafafa;
        }
        .holidays-title {
            font-weight: bold;
            font-size: clamp(12px, 2.2vw, 15px);
            border-bottom: 1px solid #000;
            margin-bottom: 6px;
            padding-bottom: 3px;
        }
        .holiday-item {
            padding: 3px 0;
            border-bottom: 1px dotted #ccc;
            line-height: 1.5;
        }
        .holiday-item:last-child { border-bottom: none; }

        /* Quote */
        .quote {
            border: 2px solid #000;
            padding: 10px 14px;
            margin-bottom: 10px;
            background: #fafafa;
            font-style: italic;
            line-height: 1.7;
        }
        .quote-text   { font-size: clamp(12px, 2.3vw, 16px); margin-bottom: 6px; }
        .quote-author { font-size: clamp(11px, 2vw, 14px); text-align: right; font-style: normal; font-weight: bold; opacity: 0.8; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TAB 2 â€” BIG CLOCK
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .bigclock-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: calc(100vh - 50px);
            padding: 10px 12px 20px;
            text-align: center;
            justify-content: center;
            gap: 10px;
        }
        #bigTime {
            font-size: clamp(80px, 24vw, 200px);
            font-weight: bold;
            letter-spacing: clamp(4px, 2vw, 20px);
            line-height: 1;
        }
        #bigDate {
            font-size: clamp(18px, 4.5vw, 34px);
            letter-spacing: 2px;
        }
        .big-holidays {
            width: 100%;
            max-width: 600px;
            font-size: clamp(12px, 2.5vw, 17px);
            text-align: left;
            line-height: 1.7;
        }
        .bigcal { width: 100%; max-width: 600px; }
        .bigcal table { width: 100%; border-collapse: collapse; }
        .bigcal th {
            border-bottom: 2px solid #000;
            padding: clamp(5px, 1.5vw, 10px);
            background: #ececec;
            font-size: clamp(14px, 3vw, 22px);
            text-align: center;
        }
        .bigcal td {
            border: 1px solid #ccc;
            height: clamp(34px, 7vw, 58px);
            text-align: center;
            vertical-align: middle;
            font-size: clamp(14px, 3vw, 22px);
        }
        .bigcal td.today { background: #000; color: #fff; font-weight: bold; }
        .bigcal td.holiday { color: #c00; font-weight: bold; }
        .bigcal td.sat { color: #00c; }
        .big-quote {
            width: 100%;
            max-width: 600px;
            padding: 12px 0 0;
            border-top: 2px solid #000;
            font-style: italic;
            line-height: 1.7;
        }
        .big-quote-text   { font-size: clamp(13px, 2.8vw, 18px); margin-bottom: 6px; }
        .big-quote-author { font-size: clamp(12px, 2.2vw, 15px); text-align: right; font-style: normal; font-weight: bold; opacity: 0.7; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TAB 3 â€” TIMER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .timer-wrap {
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 10px 0;
            align-items: center;
        }
        .timer-block { width: 100%; max-width: 560px; text-align: center; }
        .timer-label {
            font-size: clamp(15px, 3vw, 20px);
            font-weight: bold;
            letter-spacing: 2px;
            margin-bottom: 10px;
            border-bottom: 2px solid #000;
            padding-bottom: 6px;
        }
        .sw-display, .cd-display {
            font-size: clamp(56px, 15vw, 100px);
            font-weight: bold;
            letter-spacing: 4px;
            line-height: 1;
            margin-bottom: 14px;
            font-variant-numeric: tabular-nums;
        }
        .cd-display.alert { animation: blink 0.5s step-end infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        .timer-btns {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        .tbtn {
            padding: 12px 20px;
            font-family: Bookerly, Georgia, serif;
            font-size: clamp(14px, 3vw, 18px);
            font-weight: bold;
            border: 2px solid #000;
            cursor: pointer;
            min-width: 90px;
            min-height: 44px;
            letter-spacing: 1px;
        }
        .tbtn-main         { background: #000; color: #fff; }
        .tbtn-main.running { background: #fff; color: #000; }
        .tbtn-sub          { background: #e0e0e0; color: #000; }

        /* Countdown inputs */
        .cd-inputs {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 14px;
        }
        .cd-input-group { display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .cd-adj {
            width: clamp(40px, 9vw, 54px);
            height: clamp(36px, 8vw, 48px);
            font-size: clamp(18px, 4vw, 26px);
            font-weight: bold;
            border: 2px solid #000;
            background: #ececec;
            cursor: pointer;
        }
        .cd-val  { font-size: clamp(30px, 8vw, 52px); font-weight: bold; min-width: 60px; font-variant-numeric: tabular-nums; }
        .cd-unit { font-size: clamp(12px, 2.5vw, 16px); opacity: 0.6; }
        .cd-sep  { font-size: clamp(30px, 8vw, 52px); font-weight: bold; margin-bottom: 20px; }
        .cd-alert { font-size: clamp(15px, 3vw, 20px); font-weight: bold; min-height: 30px; color: #000; border: 2px solid #000; padding: 4px 10px; display: inline-block; }
        .cd-alert:empty { border: none; }

        /* Lap list */
        .lap-list {
            max-height: 120px;
            overflow-y: auto;
            border: 1px solid #000;
            font-size: clamp(12px, 2.5vw, 15px);
            text-align: left;
        }
        .lap-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 10px;
            border-bottom: 1px solid #ddd;
        }
        .lap-item:last-child { border-bottom: none; }
        .lap-item.fastest { background: #000; color: #fff; }
        .lap-item.slowest { background: #e8e8e8; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TAB 4 â€” CALCULATOR
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .calc-wrap {
            display: flex;
            justify-content: center;
            padding: 10px 0;
        }
        .calc { width: 100%; max-width: 480px; }
        .calc-display {
            background: #111;
            color: #fff;
            padding: 16px 20px;
            text-align: right;
            min-height: 110px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            border: 2px solid #000;
        }
        .calc-expr {
            font-size: clamp(14px, 3vw, 20px);
            opacity: 0.5;
            min-height: 22px;
            margin-bottom: 4px;
            word-break: break-all;
            font-family: 'Helvetica Neue', Helvetica, sans-serif;
        }
        .calc-num {
            font-size: clamp(44px, 12vw, 76px);
            font-weight: 200;
            letter-spacing: -1px;
            line-height: 1;
            word-break: break-all;
            font-family: 'Helvetica Neue', Helvetica, sans-serif;
        }
        .calc-num.small  { font-size: clamp(30px, 8vw, 52px); }
        .calc-num.xsmall { font-size: clamp(22px, 6vw, 38px); }
        .calc-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 3px;
            background: #111;
            padding: 3px;
            border: 2px solid #000;
            border-top: none;
        }
        .cb {
            /* E-ink: min 56px height for touch */
            height: clamp(56px, 14vw, 88px);
            font-size: clamp(20px, 5vw, 34px);
            font-weight: 500;
            border: none;
            cursor: pointer;
            font-family: 'Helvetica Neue', Helvetica, sans-serif;
            border-radius: 4px;
        }
        .cb-num { background: #2a2a2a; color: #fff; }
        .cb-fn  { background: #999; color: #000; font-weight: bold; }
        .cb-op  { background: #e09000; color: #fff; font-size: clamp(22px, 6vw, 36px); }
        .cb-op.active { background: #fff; color: #e09000; border: 2px solid #e09000; }
        .cb-zero { grid-column: span 2; text-align: left; padding-left: clamp(20px,5vw,32px); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TAB 5 â€” POMODORO
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .pomo-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 12px 20px;
            gap: 14px;
        }
        .pomo-modes {
            display: flex;
            gap: 6px;
            width: 100%;
            max-width: 560px;
        }
        .pomo-mode-btn {
            flex: 1;
            padding: 10px 4px;
            font-family: Bookerly, Georgia, serif;
            font-size: clamp(11px, 2.2vw, 14px);
            border: 2px solid #000;
            background: #ececec;
            cursor: pointer;
            min-height: 44px;
            font-weight: bold;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .pomo-mode-btn.active { background: #000; color: #fff; }

        .pomo-ring-wrap {
            position: relative;
            width: clamp(190px, 50vw, 280px);
            height: clamp(190px, 50vw, 280px);
        }
        .pomo-ring { width: 100%; height: 100%; transform: rotate(-90deg); }
        .pomo-ring-bg { fill: none; stroke: #ccc; stroke-width: 12; }
        .pomo-ring-fg {
            fill: none;
            stroke: #000;
            stroke-width: 12;
            stroke-linecap: butt;
            transition: stroke-dashoffset 0.8s linear, stroke 0.3s;
        }
        .pomo-ring-fg.break { stroke: #555; }
        .pomo-ring-inner {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 80%;
        }
        .pomo-time  {
            font-size: clamp(38px, 11vw, 64px);
            font-weight: bold;
            letter-spacing: 2px;
            font-variant-numeric: tabular-nums;
            line-height: 1;
        }
        .pomo-label { font-size: clamp(13px, 2.8vw, 17px); margin-top: 5px; opacity: 0.7; }
        .pomo-count { font-size: clamp(15px, 3vw, 19px); margin-top: 6px; }

        .pomo-btns { display: flex; gap: 12px; }
        .pomo-btn {
            padding: 13px clamp(24px,6vw,44px);
            font-family: Bookerly, Georgia, serif;
            font-size: clamp(16px, 3.5vw, 22px);
            font-weight: bold;
            border: 2px solid #000;
            cursor: pointer;
            letter-spacing: 2px;
            min-height: 50px;
        }
        .pomo-start         { background: #000; color: #fff; }
        .pomo-start.running { background: #fff; color: #000; }
        .pomo-reset         { background: #e0e0e0; color: #000; }

        .pomo-settings {
            width: 100%;
            max-width: 560px;
            border: 2px solid #000;
            padding: 10px 14px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            background: #fafafa;
        }
        .pomo-set-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: clamp(13px, 2.8vw, 17px);
            min-height: 44px;
        }
        .pomo-set-row span:first-child { flex: 1; font-weight: bold; }
        .pomo-set-row button {
            width: clamp(36px, 8vw, 46px);
            height: clamp(36px, 8vw, 46px);
            font-size: clamp(18px, 4vw, 24px);
            font-weight: bold;
            border: 2px solid #000;
            background: #ececec;
            cursor: pointer;
        }
        .pomo-set-val {
            font-size: clamp(18px, 4vw, 24px);
            font-weight: bold;
            min-width: clamp(28px, 6vw, 40px);
            text-align: center;
            display: inline-block;
        }

        .pomo-log {
            width: 100%;
            max-width: 560px;
            font-size: clamp(11px, 2.3vw, 14px);
            max-height: 120px;
            overflow-y: auto;
            border: 1px solid #000;
        }
        .pomo-log-empty {
            padding: 10px;
            text-align: center;
            opacity: 0.5;
            font-style: italic;
        }
        .pomo-log-item {
            padding: 5px 10px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
        }
        .pomo-log-item:last-child { border-bottom: none; }

        /* â”€â”€ Footer â”€â”€ */
        .footer {
            text-align: center;
            font-size: clamp(10px, 2vw, 13px);
            opacity: 0.5;
            margin-top: 12px;
            padding-bottom: 10px;
            border-top: 1px solid #ccc;
            padding-top: 8px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* Kindle 600Ã—800 portrait */
        @media (max-width: 600px) {
            .tab-btn { font-size: 10px; padding: 8px 2px; }
            #time    { font-size: 48px; }
            #bigTime { font-size: 80px; }
            .weather-temp { font-size: 36px; }
        }
        /* Kindle 800Ã—600 landscape */
        @media (min-width: 601px) and (max-width: 800px) {
            #time    { font-size: 60px; }
            #bigTime { font-size: 110px; }
        }
        /* Tablet */
        @media (min-width: 801px) {
            body { border-left: 1px solid #ddd; border-right: 1px solid #ddd; }
            #bigTime { font-size: 160px; }
        }
        /* Landscape e-ink */
        @media (orientation: landscape) and (max-height: 640px) {
            .bigclock-wrap { min-height: 100vh; gap: 6px; }
            #bigTime { font-size: clamp(60px, 18vw, 120px); }
            .bigcal td { height: 28px; }
        }
    </style>
</head>
<body>

<!-- â”€â”€ Tabs â”€â”€ -->
<div class="tabs">
    <button class="tab-btn active" onclick="switchTab(0)">ğŸ“Š Info</button>
    <button class="tab-btn"        onclick="switchTab(1)">ğŸ• Clock</button>
    <button class="tab-btn"        onclick="switchTab(2)">â±ï¸ Timer</button>
    <button class="tab-btn"        onclick="switchTab(3)">ğŸ”¢ Calc</button>
    <button class="tab-btn"        onclick="switchTab(4)">ğŸ… Pomo</button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 1: Info â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab1" class="tab-content active">
    <div class="clock">
        <div id="time">14:35:00</div>
        <div id="date">2026å¹´02æœˆ22æ—¥ï¼ˆæ—¥ï¼‰</div>
    </div>
    <div class="fx-rate">
        <div>
            <div class="fx-label">ğŸ’± JPY â†’ VND</div>
            <div class="fx-time" id="fxtime"></div>
        </div>
        <div class="fx-val" id="fxrate">--- VND</div>
    </div>
    <div class="weather">
        <div class="weather-header">â›… Tokyo â€“ Thá»i tiáº¿t hiá»‡n táº¡i</div>
        <div class="weather-row">
            <div class="weather-left">
                <div class="weather-temp" id="wTemp">--Â°C</div>
                <div class="weather-icon" id="wIcon">â›…</div>
            </div>
            <div class="weather-meta">
                <div id="wDesc">Äang táº£i...</div>
                <div>ğŸ’§ <b id="wHumidity">--%</b></div>
                <div>ğŸ’¨ <b id="wWind">-- km/h</b></div>
            </div>
        </div>
    </div>
    <div class="cal-wrap">
        <div class="cal-title" id="calTitle">2026å¹´ 2æœˆ</div>
        <table id="calendar"></table>
    </div>
    <div class="holidays">
        <div class="holidays-title">ğŸŒ NgÃ y lá»… thÃ¡ng nÃ y</div>
        <div id="holidayList">Äang táº£i...</div>
    </div>
    <div class="quote">
        <div class="quote-text"   id="quoteText">Äang táº£i...</div>
        <div class="quote-author" id="quoteAuthor"></div>
    </div>
    <div class="footer">Kindle Dashboard Â· Saitama Â· <span id="footerTime"></span></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 2: Big Clock â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab2" class="tab-content">
    <div class="bigclock-wrap">
        <div id="bigTime">14:35</div>
        <div id="bigDate">2026å¹´02æœˆ22æ—¥ï¼ˆæ—¥ï¼‰</div>
        <div class="big-holidays" id="bigHolidayList"></div>
        <div class="bigcal"><table id="bigCalendar"></table></div>
        <div class="big-quote">
            <div class="big-quote-text"   id="bigQuoteText"></div>
            <div class="big-quote-author" id="bigQuoteAuthor"></div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 3: Timer â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab3" class="tab-content">
    <div class="timer-wrap">

        <!-- Stopwatch -->
        <div class="timer-block">
            <div class="timer-label">â±ï¸ Stopwatch</div>
            <div class="sw-display" id="swDisplay">00:00.0</div>
            <div class="timer-btns">
                <button class="tbtn tbtn-main" id="swStartBtn" onclick="swToggle()">START</button>
                <button class="tbtn tbtn-sub"  onclick="swReset()">RESET</button>
                <button class="tbtn tbtn-sub"  onclick="swLap()">LAP</button>
            </div>
            <div class="lap-list" id="lapList"></div>
        </div>

        <!-- Divider -->
        <div style="width:100%;max-width:560px;border-top:2px solid #000;"></div>

        <!-- Countdown -->
        <div class="timer-block">
            <div class="timer-label">â³ Countdown</div>
            <div class="cd-display" id="cdDisplay">05:00</div>
            <div class="cd-inputs">
                <div class="cd-input-group">
                    <button class="cd-adj" onclick="cdAdj('m',1)">ï¼‹</button>
                    <div class="cd-val" id="cdMin">05</div>
                    <div class="cd-unit">åˆ†</div>
                    <button class="cd-adj" onclick="cdAdj('m',-1)">ï¼</button>
                </div>
                <div class="cd-sep">:</div>
                <div class="cd-input-group">
                    <button class="cd-adj" onclick="cdAdj('s',10)">ï¼‹</button>
                    <div class="cd-val" id="cdSec">00</div>
                    <div class="cd-unit">ç§’</div>
                    <button class="cd-adj" onclick="cdAdj('s',-10)">ï¼</button>
                </div>
            </div>
            <div class="timer-btns">
                <button class="tbtn tbtn-main" id="cdStartBtn" onclick="cdToggle()">START</button>
                <button class="tbtn tbtn-sub"  onclick="cdReset()">RESET</button>
            </div>
            <div id="cdAlert" class="cd-alert"></div>
        </div>

    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 4: Calculator â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab4" class="tab-content">
    <div class="calc-wrap">
        <div class="calc">
            <div class="calc-display">
                <div class="calc-expr" id="calcExpr"></div>
                <div class="calc-num"  id="calcNum">0</div>
            </div>
            <div class="calc-grid">
                <button class="cb cb-fn"  onclick="calcFn('AC')">AC</button>
                <button class="cb cb-fn"  onclick="calcFn('+/-')">+/-</button>
                <button class="cb cb-fn"  onclick="calcFn('%')">%</button>
                <button class="cb cb-op"  id="op-div" onclick="calcOp('Ã·')">Ã·</button>
                <button class="cb cb-num" onclick="calcNum('7')">7</button>
                <button class="cb cb-num" onclick="calcNum('8')">8</button>
                <button class="cb cb-num" onclick="calcNum('9')">9</button>
                <button class="cb cb-op"  id="op-mul" onclick="calcOp('Ã—')">Ã—</button>
                <button class="cb cb-num" onclick="calcNum('4')">4</button>
                <button class="cb cb-num" onclick="calcNum('5')">5</button>
                <button class="cb cb-num" onclick="calcNum('6')">6</button>
                <button class="cb cb-op"  id="op-sub" onclick="calcOp('âˆ’')">âˆ’</button>
                <button class="cb cb-num" onclick="calcNum('1')">1</button>
                <button class="cb cb-num" onclick="calcNum('2')">2</button>
                <button class="cb cb-num" onclick="calcNum('3')">3</button>
                <button class="cb cb-op"  id="op-add" onclick="calcOp('+')">+</button>
                <button class="cb cb-num cb-zero" onclick="calcNum('0')">0</button>
                <button class="cb cb-num" onclick="calcNum('.')">.</button>
                <button class="cb cb-op"  onclick="calcEqual();">=</button>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 5: Pomodoro â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab5" class="tab-content">
    <div class="pomo-wrap">
        <div class="pomo-modes">
            <button class="pomo-mode-btn active" id="modeWork"  onclick="pomoSetMode('work')">ğŸ… Focus</button>
            <button class="pomo-mode-btn"        id="modeShort" onclick="pomoSetMode('short')">â˜• Short</button>
            <button class="pomo-mode-btn"        id="modeLong"  onclick="pomoSetMode('long')">ğŸ›‹ï¸ Long</button>
        </div>
        <div class="pomo-ring-wrap">
            <svg class="pomo-ring" viewBox="0 0 200 200">
                <circle class="pomo-ring-bg" cx="100" cy="100" r="88"/>
                <circle class="pomo-ring-fg" id="pomoRingFg" cx="100" cy="100" r="88"
                    stroke-dasharray="553" stroke-dashoffset="0"/>
            </svg>
            <div class="pomo-ring-inner">
                <div class="pomo-time"  id="pomoTime">25:00</div>
                <div class="pomo-label" id="pomoLabel">Focus</div>
                <div class="pomo-count">ğŸ… Ã— <span id="pomoCount">0</span></div>
            </div>
        </div>
        <div class="pomo-btns">
            <button class="pomo-btn pomo-start" id="pomoStartBtn" onclick="pomoToggle()">START</button>
            <button class="pomo-btn pomo-reset" onclick="pomoReset()">RESET</button>
        </div>
        <div class="pomo-settings">
            <div class="pomo-set-row">
                <span>ğŸ… Focus</span>
                <button onclick="pomoAdjSet('work',-1)">ï¼</button>
                <span class="pomo-set-val" id="setWork">25</span> åˆ†
                <button onclick="pomoAdjSet('work',1)">ï¼‹</button>
            </div>
            <div class="pomo-set-row">
                <span>â˜• Short Break</span>
                <button onclick="pomoAdjSet('short',-1)">ï¼</button>
                <span class="pomo-set-val" id="setShort">5</span> åˆ†
                <button onclick="pomoAdjSet('short',1)">ï¼‹</button>
            </div>
            <div class="pomo-set-row">
                <span>ğŸ›‹ï¸ Long Break</span>
                <button onclick="pomoAdjSet('long',-1)">ï¼</button>
                <span class="pomo-set-val" id="setLong">15</span> åˆ†
                <button onclick="pomoAdjSet('long',1)">ï¼‹</button>
            </div>
        </div>
        <div class="pomo-log" id="pomoLog">
            <div class="pomo-log-empty">ChÆ°a cÃ³ session nÃ o</div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• JavaScript â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script type="text/javascript">

    /* â”€â”€ Constants â”€â”€ */
    var WEEKDAYS      = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'];
    var WEEKDAYS_FULL = ['æ—¥æ›œæ—¥','æœˆæ›œæ—¥','ç«æ›œæ—¥','æ°´æ›œæ—¥','æœ¨æ›œæ—¥','é‡‘æ›œæ—¥','åœŸæ›œæ—¥'];
    var JST_OFFSET    = 9 * 60;
    var holidayDates  = {};

    var WMO = {
        0:['â˜€ï¸','Trá»i quang'],     1:['ğŸŒ¤ï¸','Ãt mÃ¢y'],        2:['â›…','CÃ³ mÃ¢y'],
        3:['â˜ï¸','Nhiá»u mÃ¢y'],      45:['ğŸŒ«ï¸','SÆ°Æ¡ng mÃ¹'],     48:['ğŸŒ«ï¸','SÆ°Æ¡ng Ä‘Ã¡'],
        51:['ğŸŒ¦ï¸','MÆ°a phÃ¹n nháº¹'], 53:['ğŸŒ¦ï¸','MÆ°a phÃ¹n'],    55:['ğŸŒ§ï¸','MÆ°a phÃ¹n dÃ y'],
        61:['ğŸŒ§ï¸','MÆ°a nháº¹'],      63:['ğŸŒ§ï¸','MÆ°a vá»«a'],      65:['ğŸŒ§ï¸','MÆ°a to'],
        71:['ğŸŒ¨ï¸','Tuyáº¿t nháº¹'],    73:['ğŸŒ¨ï¸','Tuyáº¿t vá»«a'],    75:['â„ï¸','Tuyáº¿t dÃ y'],
        80:['ğŸŒ¦ï¸','MÆ°a rÃ o nháº¹'],  81:['ğŸŒ§ï¸','MÆ°a rÃ o'],      82:['â›ˆï¸','MÆ°a rÃ o to'],
        95:['â›ˆï¸','DÃ´ng bÃ£o'],      96:['â›ˆï¸','DÃ´ng+mÆ°a Ä‘Ã¡'],  99:['â›ˆï¸','DÃ´ng lá»›n']
    };

    var QUOTES = [
        ["Náº¿u báº¡n thá»±c sá»± muá»‘n lÃ m Ä‘iá»u gÃ¬ Ä‘Ã³, báº¡n sáº½ tÃ¬m ra cÃ¡ch. Náº¿u khÃ´ng, báº¡n sáº½ tÃ¬m tháº¥y má»™t cÃ¡i cá»›.", "Jim Rohn"],
        ["Äá»«ng ngáº¡i tá»« bá» Ä‘iá»u tá»‘t Ä‘áº¹p Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c Ä‘iá»u vÄ© Ä‘áº¡i.", "John D. Rockefeller"],
        ["ThÃ nh cÃ´ng thÆ°á»ng Ä‘áº¡t Ä‘Æ°á»£c bá»Ÿi nhá»¯ng ngÆ°á»i khÃ´ng biáº¿t ráº±ng tháº¥t báº¡i lÃ  khÃ´ng thá»ƒ trÃ¡nh khá»i.", "Coco Chanel"],
        ["Náº¿u báº¡n mÆ¡ Æ°á»›c Ä‘Æ°á»£c, báº¡n sáº½ lÃ m Ä‘Æ°á»£c.", "Walt Disney"],
        ["CÃ¡ch duy nháº¥t Ä‘á»ƒ lÃ m cÃ´ng viá»‡c tuyá»‡t vá»i lÃ  yÃªu nhá»¯ng gÃ¬ báº¡n lÃ m.", "Steve Jobs"],
        ["ThÃ nh cÃ´ng lÃ  Ä‘i tá»« tháº¥t báº¡i nÃ y sang tháº¥t báº¡i khÃ¡c mÃ  khÃ´ng máº¥t Ä‘i sá»± nhiá»‡t tÃ¬nh.", "Winston Churchill"],
        ["HÃ nh Ä‘á»™ng lÃ  chÃ¬a khÃ³a ná»n táº£ng cho má»i thÃ nh cÃ´ng.", "Pablo Picasso"],
        ["TÃ´i khÃ´ng tháº¥t báº¡i. TÃ´i chá»‰ tÃ¬m tháº¥y 10,000 cÃ¡ch khÃ´ng hiá»‡u quáº£.", "Thomas Edison"],
        ["TÆ°Æ¡ng lai thuá»™c vá» nhá»¯ng ngÆ°á»i tin vÃ o váº» Ä‘áº¹p cá»§a giáº¥c mÆ¡ mÃ¬nh.", "Eleanor Roosevelt"],
        ["Báº¡n khÃ´ng cáº§n pháº£i tuyá»‡t vá»i Ä‘á»ƒ báº¯t Ä‘áº§u, nhÆ°ng báº¡n pháº£i báº¯t Ä‘áº§u Ä‘á»ƒ trá»Ÿ nÃªn tuyá»‡t vá»i.", "Zig Ziglar"],
        ["Äá»«ng chá» Ä‘á»£i. Thá»i Ä‘iá»ƒm sáº½ khÃ´ng bao giá» hoÃ n háº£o.", "Napoleon Hill"],
        ["NgÆ°á»i chiáº¿n tháº¯ng khÃ´ng bao giá» bá» cuá»™c. NgÆ°á»i bá» cuá»™c khÃ´ng bao giá» chiáº¿n tháº¯ng.", "Vince Lombardi"],
        ["MÆ¡ Æ°á»›c lá»›n. Báº¯t Ä‘áº§u nhá». NhÆ°ng trÃªn háº¿t, hÃ£y báº¯t Ä‘áº§u.", "Simon Sinek"],
        ["ThÃ nh cÃ´ng khÃ´ng pháº£i lÃ  chÃ¬a khÃ³a cá»§a háº¡nh phÃºc. Háº¡nh phÃºc lÃ  chÃ¬a khÃ³a cá»§a thÃ nh cÃ´ng.", "Albert Schweitzer"],
        ["TÃ´i tháº¥t báº¡i nhiá»u láº§n. VÃ  Ä‘Ã³ lÃ  lÃ½ do tÃ´i thÃ nh cÃ´ng.", "Michael Jordan"],
        ["HÃ£y Ä‘áº§u tÆ° vÃ o báº£n thÃ¢n mÃ¬nh. ÄÃ³ lÃ  khoáº£n Ä‘áº§u tÆ° tá»‘t nháº¥t báº¡n tá»«ng thá»±c hiá»‡n.", "Robin Sharma"],
        ["Náº¿u báº¡n khÃ´ng xÃ¢y dá»±ng giáº¥c mÆ¡ cá»§a mÃ¬nh, ai Ä‘Ã³ sáº½ thuÃª báº¡n Ä‘á»ƒ xÃ¢y dá»±ng giáº¥c mÆ¡ cá»§a há».", "Tony Gaskins"],
        ["ThÃ¡i Ä‘á»™ cá»§a báº¡n, chá»© khÃ´ng pháº£i nÄƒng lá»±c cá»§a báº¡n, sáº½ quyáº¿t Ä‘á»‹nh Ä‘á»™ cao cá»§a báº¡n.", "Zig Ziglar"],
        ["CÆ¡ há»™i khÃ´ng tá»± nhiÃªn Ä‘áº¿n. Báº¡n tá»± táº¡o ra nÃ³.", "Chris Grosser"],
        ["Sá»± kiÃªn trÃ¬ chiáº¿n tháº¯ng tÃ i nÄƒng khi tÃ i nÄƒng khÃ´ng kiÃªn trÃ¬.", "John Wooden"],
        ["HÃ£y cá»‘ gáº¯ng Ä‘á»«ng trá»Ÿ thÃ nh ngÆ°á»i thÃ nh cÃ´ng. Thay vÃ o Ä‘Ã³ hÃ£y trá»Ÿ thÃ nh ngÆ°á»i cÃ³ giÃ¡ trá»‹.", "Albert Einstein"],
        ["KhÃ´ng cÃ³ bÃ­ quyáº¿t cho thÃ nh cÃ´ng. ÄÃ³ lÃ  káº¿t quáº£ cá»§a sá»± chuáº©n bá»‹, lÃ m viá»‡c chÄƒm chá»‰ vÃ  há»c há»i tá»« tháº¥t báº¡i.", "Colin Powell"],
        ["CÃ¡ch tá»‘t nháº¥t Ä‘á»ƒ dá»± Ä‘oÃ¡n tÆ°Æ¡ng lai lÃ  tá»± táº¡o ra nÃ³.", "Peter Drucker"],
        ["HÃ£y sá»‘ng nhÆ° thá»ƒ báº¡n sáº½ cháº¿t ngÃ y mai. Há»c nhÆ° thá»ƒ báº¡n sáº½ sá»‘ng mÃ£i mÃ£i.", "Mahatma Gandhi"],
        ["Äá»«ng Ä‘áº¿m ngÃ y. HÃ£y lÃ m cho má»—i ngÃ y cÃ³ Ã½ nghÄ©a.", "Muhammad Ali"],
        ["Báº¡n lÃ  kiáº¿n trÃºc sÆ° cá»§a sá»‘ pháº­n cá»§a chÃ­nh mÃ¬nh.", "Khuyáº¿t danh"],
        ["Äá»«ng sá»£ tháº¥t báº¡i. Sá»£ khÃ´ng cá»‘ gáº¯ng.", "Khuyáº¿t danh"],
        ["ChÃºng ta táº¡o ra cuá»™c sá»‘ng cá»§a mÃ¬nh vÃ  chÃºng ta táº¡o ra nÃ³ má»—i ngÃ y.", "Oprah Winfrey"],
        ["Báº¡n cÃ ng Ä‘am mÃª Ä‘iá»u gÃ¬, báº¡n cÃ ng thÃ nh cÃ´ng trong Ä‘iá»u Ä‘Ã³.", "Oprah Winfrey"],
        ["CÃ¡ch duy nháº¥t Ä‘á»ƒ vÆ°á»£t qua giá»›i háº¡n lÃ  dÃ¡m vÆ°á»£t qua nÃ³.", "Khuyáº¿t danh"]
    ];

    var selectedQuote = QUOTES[Math.floor(Math.random() * QUOTES.length)];

    /* â”€â”€ Helpers â”€â”€ */
    function pad(n) { return n < 10 ? '0' + n : '' + n; }

    function getJST() {
        var now = new Date();
        return new Date(now.getTime() + (now.getTimezoneOffset() + JST_OFFSET) * 60000);
    }

    function getWMO(code) {
        if (WMO[code]) return WMO[code];
        if (code <= 3)  return ['â›…','CÃ³ mÃ¢y'];
        if (code <= 55) return ['ğŸŒ¦ï¸','MÆ°a phÃ¹n'];
        if (code <= 65) return ['ğŸŒ§ï¸','MÆ°a'];
        if (code <= 77) return ['ğŸŒ¨ï¸','Tuyáº¿t'];
        if (code <= 82) return ['ğŸŒ¦ï¸','MÆ°a rÃ o'];
        return ['â›ˆï¸','DÃ´ng bÃ£o'];
    }

    /* â”€â”€ Tab Switch â”€â”€ */
    function switchTab(idx) {
        var tabs = document.querySelectorAll('.tab-content');
        var btns = document.querySelectorAll('.tab-btn');
        for (var i = 0; i < tabs.length; i++) {
            tabs[i].className = i === idx ? 'tab-content active' : 'tab-content';
            btns[i].className = i === idx ? 'tab-btn active'     : 'tab-btn';
        }
    }

    /* â”€â”€ Clock â”€â”€ */
    function updateClock() {
        var jst = getJST();
        var h = pad(jst.getHours()), m = pad(jst.getMinutes()), s = pad(jst.getSeconds());
        var yr = jst.getFullYear(), mo = pad(jst.getMonth()+1), dy = pad(jst.getDate());
        var wd = WEEKDAYS[jst.getDay()], wdf = WEEKDAYS_FULL[jst.getDay()];

        document.getElementById('time').innerHTML    = h+':'+m+':'+s;
        document.getElementById('date').innerHTML    = yr+'å¹´'+mo+'æœˆ'+dy+'æ—¥ï¼ˆ'+wd+'ï¼‰';
        document.getElementById('bigTime').innerHTML = h+':'+m;
        document.getElementById('bigDate').innerHTML = yr+'å¹´'+mo+'æœˆ'+dy+'æ—¥ï¼ˆ'+wd+'ï¼‰';
        document.getElementById('footerTime').innerHTML = 'æ›´æ–° '+h+':'+m;
    }

    /* â”€â”€ Quote â”€â”€ */
    function showQuote() {
        var q = '"' + selectedQuote[0] + '"';
        var a = 'â€” ' + selectedQuote[1];
        document.getElementById('quoteText').innerHTML      = q;
        document.getElementById('quoteAuthor').innerHTML    = a;
        document.getElementById('bigQuoteText').innerHTML   = q;
        document.getElementById('bigQuoteAuthor').innerHTML = a;
    }

    /* â”€â”€ FX Rate â”€â”€ */
    function loadFX() {
        var xhr = new XMLHttpRequest();
        xhr.open('GET','https://api.exchangerate-api.com/v4/latest/JPY',true);
        xhr.onload = function() {
            if (xhr.status !== 200) return;
            var d = JSON.parse(xhr.responseText);
            if (!d.rates || !d.rates.VND) return;
            var rate = Math.round(d.rates.VND * 100) / 100;
            document.getElementById('fxrate').innerHTML = rate + ' VND';
            var now = getJST();
            document.getElementById('fxtime').innerHTML = pad(now.getHours())+':'+pad(now.getMinutes());
        };
        xhr.send();
    }

    /* â”€â”€ Weather â”€â”€ */
    function loadWeather() {
        var url = 'https://api.open-meteo.com/v1/forecast' +
            '?latitude=35.6762&longitude=139.6503' +
            '&current_weather=true&hourly=relativehumidity_2m' +
            '&timezone=Asia%2FTokyo';
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        xhr.onload = function() {
            if (xhr.status === 200) renderWeather(JSON.parse(xhr.responseText));
            else document.getElementById('wDesc').innerHTML = 'Lá»—i API';
        };
        xhr.onerror = function() { document.getElementById('wDesc').innerHTML = 'Offline'; };
        xhr.send();
    }

    function renderWeather(data) {
        var cw = data.current_weather;
        var wmo = getWMO(cw.weathercode);
        var t = Math.round(cw.temperature);
        document.getElementById('wTemp').innerHTML = t + 'Â°C';
        document.getElementById('wIcon').innerHTML = wmo[0];
        document.getElementById('wDesc').innerHTML = wmo[1];
        document.getElementById('wWind').innerHTML = Math.round(cw.windspeed) + ' km/h';
        var hr = getJST().getHours();
        var hum = (data.hourly && data.hourly.relativehumidity_2m) ? (data.hourly.relativehumidity_2m[hr] || '--') : '--';
        document.getElementById('wHumidity').innerHTML = hum + '%';
    }

    /* â”€â”€ Holidays â”€â”€ */
    function loadHolidays() {
        var year = getJST().getFullYear();
        var xhrJP = new XMLHttpRequest();
        xhrJP.open('GET','https://holidays-jp.github.io/api/v1/'+year+'/date.json',true);
        xhrJP.onload = function() { if (xhrJP.status === 200) displayHolidays(JSON.parse(xhrJP.responseText),'JP'); };
        xhrJP.send();
        var xhrVN = new XMLHttpRequest();
        xhrVN.open('GET','https://date.nager.at/api/v3/PublicHolidays/'+year+'/VN',true);
        xhrVN.onload = function() { if (xhrVN.status === 200) displayHolidays(JSON.parse(xhrVN.responseText),'VN'); };
        xhrVN.send();
    }

    function displayHolidays(data, country) {
        var mo = getJST().getMonth() + 1;
        var html = '';
        if (country === 'JP') {
            for (var ds in data) {
                var p = ds.split('-'); var m2 = parseInt(p[1]); var d2 = parseInt(p[2]);
                if (m2 === mo) { html += '<div class="holiday-item">ğŸ‡¯ğŸ‡µ '+m2+'/'+d2+' '+data[ds]+'</div>'; holidayDates[d2] = true; }
            }
        } else {
            for (var i = 0; i < data.length; i++) {
                var p = data[i].date.split('-'); var m2 = parseInt(p[1]); var d2 = parseInt(p[2]);
                if (m2 === mo) { html += '<div class="holiday-item">ğŸ‡»ğŸ‡³ '+m2+'/'+d2+' '+data[i].localName+'</div>'; }
            }
        }
        var el = document.getElementById('holidayList');
        if (html) el.innerHTML = (el.innerHTML === 'Äang táº£i...' ? '' : el.innerHTML) + html;
        else if (el.innerHTML === 'Äang táº£i...') el.innerHTML = 'KhÃ´ng cÃ³ ngÃ y lá»…';
        renderCalendar('calendar','cal-wrap',false);
        renderCalendar('bigCalendar','bigcal',true);
        renderBigHolidays();
    }

    function renderBigHolidays() {
        var src = document.getElementById('holidayList');
        var el  = document.getElementById('bigHolidayList');
        if (!src || !el) return;
        el.innerHTML = src.innerHTML === 'Äang táº£i...' ? '' : src.innerHTML;
    }

    /* â”€â”€ Calendar â”€â”€ */
    function renderCalendar(tableId, wrapClass, big) {
        var jst = getJST();
        var year = jst.getFullYear(), month = jst.getMonth(), today = jst.getDate();
        var table = document.getElementById(tableId);
        if (!table) return;
        table.innerHTML = '';

        if (tableId === 'calendar') {
            document.getElementById('calTitle').innerHTML = year + 'å¹´ ' + (month+1) + 'æœˆ';
        }

        var thead = document.createElement('thead');
        var hr = document.createElement('tr');
        for (var i = 0; i < 7; i++) {
            var th = document.createElement('th');
            th.innerHTML = WEEKDAYS[i];
            hr.appendChild(th);
        }
        thead.appendChild(hr); table.appendChild(thead);

        var tbody = document.createElement('tbody');
        var firstDay = new Date(year, month, 1).getDay();
        var total = new Date(year, month+1, 0).getDate();
        var row = document.createElement('tr');
        for (var i = 0; i < firstDay; i++) row.appendChild(document.createElement('td'));
        for (var d = 1; d <= total; d++) {
            if ((firstDay + d - 1) % 7 === 0 && d !== 1) { tbody.appendChild(row); row = document.createElement('tr'); }
            var td = document.createElement('td');
            td.innerHTML = d;
            var cls = [];
            if (d === today) cls.push('today');
            if (holidayDates[d]) cls.push('holiday');
            var dow = (firstDay + d - 1) % 7;
            if (dow === 6) cls.push('sat');
            if (cls.length) td.className = cls.join(' ');
            row.appendChild(td);
        }
        tbody.appendChild(row); table.appendChild(tbody);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STOPWATCH
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    var swRunning=false, swStart=0, swElapsed=0, swTimer=null, swLaps=[];

    function swToggle() {
        if (!swRunning) {
            swStart = Date.now() - swElapsed;
            swTimer = setInterval(swTick, 100);
            swRunning = true;
            document.getElementById('swStartBtn').innerHTML  = 'STOP';
            document.getElementById('swStartBtn').className = 'tbtn tbtn-main running';
        } else {
            clearInterval(swTimer); swElapsed = Date.now() - swStart; swRunning = false;
            document.getElementById('swStartBtn').innerHTML  = 'START';
            document.getElementById('swStartBtn').className = 'tbtn tbtn-main';
        }
    }
    function swTick() { swElapsed = Date.now() - swStart; document.getElementById('swDisplay').innerHTML = swFmt(swElapsed); }
    function swReset() {
        clearInterval(swTimer); swRunning=false; swElapsed=0; swLaps=[];
        document.getElementById('swDisplay').innerHTML  = '00:00.0';
        document.getElementById('swStartBtn').innerHTML = 'START';
        document.getElementById('swStartBtn').className = 'tbtn tbtn-main';
        document.getElementById('lapList').innerHTML    = '';
    }
    function swLap() {
        if (!swRunning && swElapsed === 0) return;
        swLaps.push(swElapsed); renderLaps();
    }
    function swFmt(ms) {
        var t = Math.floor(ms/100);
        return pad(Math.floor(t/600)) + ':' + pad(Math.floor(t/10)%60) + '.' + (t%10);
    }
    function renderLaps() {
        var splits = swLaps.map(function(v,i){ return i===0?v:v-swLaps[i-1]; });
        var mn = Math.min.apply(null,splits), mx = Math.max.apply(null,splits);
        var html = '';
        for (var i = swLaps.length-1; i >= 0; i--) {
            var cls = splits.length>1 ? (splits[i]===mn?' fastest':splits[i]===mx?' slowest':'') : '';
            html += '<div class="lap-item'+cls+'"><span>Lap '+(i+1)+'</span><span>'+swFmt(splits[i])+'</span><span>'+swFmt(swLaps[i])+'</span></div>';
        }
        document.getElementById('lapList').innerHTML = html;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       COUNTDOWN
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    var cdRunning=false, cdTimer=null, cdMinutes=5, cdSeconds=0, cdRemain=0, cdEndTime=0;

    function cdAdj(unit, val) {
        if (cdRunning) return;
        if (unit==='m') cdMinutes = Math.max(0, Math.min(99, cdMinutes+val));
        else cdSeconds = Math.max(0, Math.min(50, cdSeconds+val));
        document.getElementById('cdMin').innerHTML = pad(cdMinutes);
        document.getElementById('cdSec').innerHTML = pad(cdSeconds);
        cdRemain = (cdMinutes*60+cdSeconds)*1000;
        cdRefresh(); document.getElementById('cdAlert').innerHTML='';
    }
    function cdToggle() {
        if (!cdRunning) {
            if (cdRemain<=0) cdRemain=(cdMinutes*60+cdSeconds)*1000;
            if (cdRemain<=0) return;
            document.getElementById('cdAlert').innerHTML='';
            document.getElementById('cdDisplay').className='cd-display';
            cdEndTime = Date.now()+cdRemain;
            cdTimer   = setInterval(function(){ cdTick(); }, 250);
            cdRunning = true;
            document.getElementById('cdStartBtn').innerHTML  = 'PAUSE';
            document.getElementById('cdStartBtn').className = 'tbtn tbtn-main running';
        } else {
            clearInterval(cdTimer); cdRemain=cdEndTime-Date.now(); cdRunning=false;
            document.getElementById('cdStartBtn').innerHTML  = 'START';
            document.getElementById('cdStartBtn').className = 'tbtn tbtn-main';
        }
    }
    function cdTick() {
        cdRemain = cdEndTime - Date.now();
        if (cdRemain<=0) {
            cdRemain=0; clearInterval(cdTimer); cdRunning=false;
            document.getElementById('cdDisplay').innerHTML  = '00:00';
            document.getElementById('cdDisplay').className = 'cd-display alert';
            document.getElementById('cdStartBtn').innerHTML = 'START';
            document.getElementById('cdStartBtn').className = 'tbtn tbtn-main';
            document.getElementById('cdAlert').innerHTML   = 'ğŸ”” Háº¿t giá»!';
            return;
        }
        cdRefresh();
    }
    function cdRefresh() {
        var t=Math.ceil(cdRemain/1000);
        document.getElementById('cdDisplay').innerHTML = pad(Math.floor(t/60))+':'+pad(t%60);
    }
    function cdReset() {
        clearInterval(cdTimer); cdRunning=false;
        cdRemain=(cdMinutes*60+cdSeconds)*1000;
        document.getElementById('cdDisplay').innerHTML  = pad(cdMinutes)+':'+pad(cdSeconds);
        document.getElementById('cdDisplay').className = 'cd-display';
        document.getElementById('cdStartBtn').innerHTML = 'START';
        document.getElementById('cdStartBtn').className = 'tbtn tbtn-main';
        document.getElementById('cdAlert').innerHTML   = '';
    }
    cdRemain = (cdMinutes*60+cdSeconds)*1000;

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CALCULATOR
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    var cCur='0', cPrev='', cOp='', cNew=true, cRes=false;

    function calcDisplay() {
        var el=document.getElementById('calcNum'); el.innerHTML=cCur;
        var l=cCur.replace('-','').length;
        el.className='calc-num'+(l>9?' xsmall':l>6?' small':'');
    }
    function calcNum(v) {
        if (cRes && v!=='.') { cCur='0'; cRes=false; }
        if (v==='.') {
            if (cNew) { cCur='0.'; cNew=false; return calcDisplay(); }
            if (cCur.indexOf('.')!==-1) return;
            cCur+='.'; return calcDisplay();
        }
        if (cNew) { cCur=v; cNew=false; }
        else { cCur=cCur==='0'?v:cCur+v; }
        if (cCur.replace('-','').length>12) return;
        calcDisplay();
    }
    function calcOp(op) {
        if (cOp && !cNew) calcEqual(true);
        cPrev=cCur; cOp=op; cNew=true; cRes=false;
        var ids={'Ã·':'op-div','Ã—':'op-mul','âˆ’':'op-sub','+':'op-add'};
        document.querySelectorAll('.cb-op').forEach(function(b){ b.className='cb cb-op'; });
        if (ids[op]) document.getElementById(ids[op]).className='cb cb-op active';
        document.getElementById('calcExpr').innerHTML=cPrev+' '+op;
    }
    function calcEqual(chain) {
        if (!cOp) return;
        var a=parseFloat(cPrev), b=parseFloat(cCur), r;
        if (cOp==='Ã·') r=b!==0?a/b:'Error';
        if (cOp==='Ã—') r=a*b;
        if (cOp==='âˆ’') r=a-b;
        if (cOp==='+') r=a+b;
        if (!chain) {
            document.getElementById('calcExpr').innerHTML=cPrev+' '+cOp+' '+cCur+' =';
            cOp='';
            document.querySelectorAll('.cb-op').forEach(function(b){ b.className='cb cb-op'; });
        }
        if (r==='Error') { cCur='Error'; }
        else { var s=parseFloat(r.toFixed(10)).toString(); cCur=s.length>12?parseFloat(r.toPrecision(8)).toString():s; }
        cPrev=cCur; cNew=true; cRes=!chain; calcDisplay();
    }
    function calcFn(fn) {
        var n=parseFloat(cCur);
        if (fn==='AC') {
            cCur='0'; cPrev=''; cOp=''; cNew=true; cRes=false;
            document.getElementById('calcExpr').innerHTML='';
            document.querySelectorAll('.cb-op').forEach(function(b){ b.className='cb cb-op'; });
        }
        if (fn==='+/-') { cCur=(n*-1).toString(); cRes=false; }
        if (fn==='%')   { cCur=(n/100).toString(); cRes=false; }
        calcDisplay();
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       POMODORO
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    var POMO_SETS   = { work:25, short:5, long:15 };
    var POMO_LABELS = { work:'Focus', short:'Short Break', long:'Long Break' };
    var pomoMode='work', pomoRunning=false, pomoTimer=null;
    var pomoRemain=0, pomoTotal=0, pomoEndTime=0, pomoCount=0;
    var POMO_C = 2 * Math.PI * 88; // â‰ˆ 553

    function pomoSetMode(mode) {
        if (pomoRunning) return;
        pomoMode  = mode;
        pomoTotal = POMO_SETS[mode]*60*1000;
        pomoRemain= pomoTotal;
        var map={work:'modeWork',short:'modeShort',long:'modeLong'};
        document.querySelectorAll('.pomo-mode-btn').forEach(function(b){ b.className='pomo-mode-btn'; });
        document.getElementById(map[mode]).className='pomo-mode-btn active';
        var fg=document.getElementById('pomoRingFg');
        fg.className='pomo-ring-fg'+(mode==='work'?'':' break');
        document.getElementById('pomoLabel').innerHTML=POMO_LABELS[mode];
        pomoRefresh();
    }
    function pomoToggle() {
        if (!pomoRunning) {
            pomoEndTime=Date.now()+pomoRemain;
            pomoTimer=setInterval(pomoTick,500);
            pomoRunning=true;
            document.getElementById('pomoStartBtn').innerHTML  ='PAUSE';
            document.getElementById('pomoStartBtn').className ='pomo-btn pomo-start running';
        } else {
            clearInterval(pomoTimer); pomoRemain=pomoEndTime-Date.now(); pomoRunning=false;
            document.getElementById('pomoStartBtn').innerHTML  ='START';
            document.getElementById('pomoStartBtn').className ='pomo-btn pomo-start';
        }
    }
    function pomoTick() {
        pomoRemain=pomoEndTime-Date.now();
        if (pomoRemain<=0) {
            pomoRemain=0; clearInterval(pomoTimer); pomoRunning=false;
            document.getElementById('pomoStartBtn').innerHTML  ='START';
            document.getElementById('pomoStartBtn').className ='pomo-btn pomo-start';
            pomoRefresh(); pomoOnComplete(); return;
        }
        pomoRefresh();
    }
    function pomoRefresh() {
        var t=Math.ceil(pomoRemain/1000);
        document.getElementById('pomoTime').innerHTML=pad(Math.floor(t/60))+':'+pad(t%60);
        var pct = pomoTotal>0 ? pomoRemain/pomoTotal : 0;
        var fg=document.getElementById('pomoRingFg');
        fg.style.strokeDasharray  = POMO_C;
        fg.style.strokeDashoffset = POMO_C*(1-pct);
    }
    function pomoOnComplete() {
        var now=getJST();
        var time=pad(now.getHours())+':'+pad(now.getMinutes());
        var icon=pomoMode==='work'?'ğŸ…':pomoMode==='short'?'â˜•':'ğŸ›‹ï¸';
        var log=document.getElementById('pomoLog');
        var empty=log.querySelector('.pomo-log-empty');
        if (empty) empty.remove();
        log.innerHTML='<div class="pomo-log-item"><span>'+icon+' '+POMO_LABELS[pomoMode]+'</span><span>'+time+'</span></div>'+log.innerHTML;
        if (pomoMode==='work') {
            pomoCount++;
            document.getElementById('pomoCount').innerHTML=pomoCount;
            pomoSetMode(pomoCount%4===0?'long':'short');
        } else { pomoSetMode('work'); }
    }
    function pomoReset() {
        clearInterval(pomoTimer); pomoRunning=false;
        pomoRemain=POMO_SETS[pomoMode]*60*1000;
        pomoTotal=pomoRemain;
        document.getElementById('pomoStartBtn').innerHTML  ='START';
        document.getElementById('pomoStartBtn').className ='pomo-btn pomo-start';
        pomoRefresh();
    }
    function pomoAdjSet(mode,val) {
        if (pomoRunning) return;
        POMO_SETS[mode]=Math.max(1,Math.min(60,POMO_SETS[mode]+val));
        var ids={work:'setWork',short:'setShort',long:'setLong'};
        document.getElementById(ids[mode]).innerHTML=POMO_SETS[mode];
        if (mode===pomoMode) { pomoTotal=POMO_SETS[mode]*60*1000; pomoRemain=pomoTotal; pomoRefresh(); }
    }

    /* â”€â”€ Init â”€â”€ */
    updateClock();
    renderCalendar('calendar','cal-wrap',false);
    renderCalendar('bigCalendar','bigcal',true);
    showQuote();
    loadFX();
    loadWeather();
    loadHolidays();
    pomoRefresh();

    setInterval(updateClock, 1000);
    setInterval(loadFX,      15*60*1000);
    setInterval(loadWeather, 30*60*1000);

    // Reload bypass cache má»—i 10 phÃºt
    setInterval(function(){
        window.location.href = window.location.href.split('?')[0]+'?t='+Date.now();
    }, 10*60*1000);

</script>
</body>
</html>
